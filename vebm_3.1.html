
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>EBM Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="vebm_3" data-languages="[&quot;shell&quot;,&quot;ruby&quot;,&quot;python&quot;,&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="ruby">ruby</a>
              <a href="#" data-language-name="python">python</a>
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#key-features" class="toc-h1 toc-link" data-title="Key Features">Key Features</a>
          </li>
          <li>
            <a href="#pre-requisites" class="toc-h1 toc-link" data-title="Pre-requisites">Pre-requisites</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#hardware" class="toc-h2 toc-link" data-title="Hardware">Hardware</a>
                  </li>
                  <li>
                    <a href="#operating-system" class="toc-h2 toc-link" data-title="Operating System">Operating System</a>
                  </li>
                  <li>
                    <a href="#software" class="toc-h2 toc-link" data-title="Software">Software</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#installation" class="toc-h1 toc-link" data-title="Installation">Installation</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#standalone-installation" class="toc-h2 toc-link" data-title="Standalone-Installation">Standalone-Installation</a>
                  </li>
                  <li>
                    <a href="#ha-installation" class="toc-h2 toc-link" data-title="HA Installation">HA Installation</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#post-installation" class="toc-h1 toc-link" data-title="Post Installation">Post Installation</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#configure-property-file" class="toc-h2 toc-link" data-title="Configure property file">Configure property file</a>
                  </li>
                  <li>
                    <a href="#housekeeping-cron-jobs" class="toc-h2 toc-link" data-title="Housekeeping cron jobs">Housekeeping cron jobs</a>
                  </li>
                  <li>
                    <a href="#log-rotation-for-catalina-out" class="toc-h2 toc-link" data-title="Log rotation for Catalina.out">Log rotation for Catalina.out</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://tumuvamsi.github.io/slate/vebm_3.1.html'>Vicom Enterprise Balckout Manager Documentation</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Intro: vEBM is an easy-to-use planned maintenance scheduling software that has built-in capability to help efficiently plan and schedule maintenance to suppress unwanted noise. vEBM’s feature rich user-friendly web-interface lets user to create/edit/delete Maintenance schedules quickly for event suppression. It also provides tight integration with various service desk applications. </p>
<h1 id='key-features'>Key Features</h1>
<ul>
<li>User friendly Calendar Interface with time zone support. </li>
<li>Asset upload from various sources </li>
<li>Ready to search assets while creating schedules </li>
<li>LDAP Authentication </li>
<li>Notification on creation and daily information Mails </li>
<li>Bulk CI Maintenance via CSV </li>
<li>REST API / WEB SERVICES for third party integrations </li>
<li>Simple export features for reporting purpose.<br></li>
<li>Regularly Sync the Asset data and User data (LDAP) </li>
</ul>
<h1 id='pre-requisites'>Pre-requisites</h1><h2 id='hardware'>Hardware</h2>
<ul>
<li>RAM 6GB Minimum. (Recommended 8GB) </li>
<li>Processor 2-CPU system with 3.0 GHz (or greater) CPUs Minimum (4-CPU system with 3.0 GHz (or greater) CPUs) </li>
<li>Installation Directory must have 30 GB minimum space </li>
</ul>
<h2 id='operating-system'>Operating System</h2>
<ul>
<li><strong>CentOS7</strong> </li>
<li><strong>RHEL</strong></li>
</ul>
<h2 id='software'>Software</h2>
<ul>
<li>Java 1.7 or Later </li>
<li>MySQL 5.7 (For standalone) </li>
<li>MariaDB (For HA) </li>
</ul>
<h1 id='installation'>Installation</h1><h2 id='standalone-installation'>Standalone-Installation</h2><h3 id='data-base'>Data Base</h3>
<ol>
<li>Download and add the repository.
</br>
<strong><code>sudo yum localinstall https://dev.mysql.com/get/mysql57-community-release-el7-11.noarch.rpm</code></strong>
</br></li>
<li>Install MySQL 5.7 package 
</br>
<strong><code>yum install mysql-community-server</code></strong>
<p></P></li>
</ol>
<h3 id='starting-mysql'>Starting MySQL</h3>
<ol>
<li>After the installation is completed, to enable and start the MySQL service</br>
<strong><code>sudo systemctl enable mysqld</code></strong></br> 
<strong><code>sudo systemctl start mysqld</code></strong> </br></li>
<li>Check the MySQL service status by typing</br> 
<strong><code>sudo systemctl status mysqld</code></strong></br></li>
</ol>
<h3 id='secure-mysql'>Secure MySQL</h3>
<ol>
<li>Get the temporary password for SQL with by running below command</br> 
<strong><code>sudo grep &#39;temporary password&#39; /var/log/mysqld.log</code></strong></br></li>
</ol>

<blockquote>
<p>The output should look something like this </p>
</blockquote>
<pre class="highlight shell tab-shell"><code>2018-05-23T10:59:51.251159Z 5 <span class="o">[</span>Note] <span class="o">[</span>MY-010454] <span class="o">[</span>Server] A temporary password is generated <span class="k">for </span>root@localhost: q&amp;0<span class="o">)</span>V!?fjksL
</code></pre>
<aside class="notice">
(Make note of the password, because the next command will ask you to enter the temporary root password)
</aside>

<p></br>
2. Run the<span>&nbsp;</span> mysql_secure_installation command 
<strong><code>sudo mysql_secure_installation</code></strong></p>

<blockquote>
<p>The output should look something like this</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="gp">$ </span>Securing the MySQL server deployment. 

<span class="gp">$ </span>Enter password <span class="k">for </span>user root: 
</code></pre>
<p></br>
3. After entering the temporary password, you will be asked to set a new password for user root. The password needs to be at least 8-character long and to contain at least one uppercase letter, one lowercase letter, one number and one special character. </p>

<blockquote>
<p>The output should look something like this</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>The existing password <span class="k">for </span>the user account root has expired. Please <span class="nb">set </span>a new password. 

New password: 

Re-enter new password: 
</code></pre>
<aside class="notice">
Make note of the new password for connecting to the database
</aside>

<p></br>
4. The script will also ask you to remove the anonymous user, restrict root user access to the local machine and remove the test database. You should answer “Y” (yes) to all questions</p>
<h3 id='run-the-schema'>Run the schema</h3>
<ol>
<li>create the ebm schema and table with below command </br>
<strong><code>mysqldump -u username -p database_name &gt; data-dump.sql</code></strong></br></li>
<li>Enter Password on prompt.</br></li>
</ol>
<h3 id='vebm-server-installation'>vEBM Server Installation</h3>
<ol>
<li>Create ebmuser and make sure he has the permission for /opt directory </br></li>
<li>Un-tar the vEBM_v3.x.tar package under /opt </br></li>
<li>tar -xvf vEBM_v3.x.tar </li>
</ol>
<h2 id='ha-installation'>HA Installation</h2>
<ol>
<li>Will be update Later ...</li>
</ol>
<h1 id='post-installation'>Post Installation</h1><h2 id='configure-property-file'>Configure property file</h2>
<ol>
<li>Go to /opt/vebm/webapps/VicomEBM-3.0/WEB-INF/classes/</br></li>
<li>Take a backup of application.properties . Run below command</br>
<strong><code>cp  application.properties  application.properties.original</code></strong></br></li>
<li>Open the application.properties file</br>
<strong><code>vi application.properties</code></strong></br></li>
<li>Update the properties as given below table </br></br></li>
</ol>

<table><thead>
<tr>
<th>Property</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>spring.datasource.password</td>
<td>MySQL password which was created at step 4 of 3.3</td>
<td>MySql password</td>
</tr>
<tr>
<td>spring.mail.host</td>
<td>SMTP Host name</td>
<td>SMTP Host name</td>
</tr>
<tr>
<td>spring.mail.port</td>
<td>Secured SMTP port</td>
<td>587 (by default)</td>
</tr>
<tr>
<td>spring.mail.username</td>
<td>vEBM Service account mail Id</td>
<td>N/A</td>
</tr>
<tr>
<td>spring.mail.password</td>
<td>vEBM Service account mail Id password</td>
<td>N/A</td>
</tr>
<tr>
<td>spring.mail.from</td>
<td>vEBM Service account mail Id</td>
<td>N/A</td>
</tr>
<tr>
<td>spring.mail.to</td>
<td>vEBM Mail recipients</td>
<td>N/A</td>
</tr>
<tr>
<td>mail.sentFlag</td>
<td>Email Sent flag to enable or disable Email Notifications</td>
<td>True (by Default) </br>False (for disable)</td>
</tr>
<tr>
<td>indexing.indexDirectory</td>
<td>Directory to save the uploaded asset indexes</td>
<td>Directory to save the uploaded asset indexes</td>
</tr>
<tr>
<td>indexing.relational</td>
<td>While creating the schedules this enables the relation of parent child</td>
<td>True (by Default)</br> False (for disable)</td>
</tr>
<tr>
<td>indexing.resolverGroup</td>
<td>Exact Name of Support group column which uploaded as part of asset upload provides the group-based search</td>
<td>Empty (by Default)</br>Support group/Resolver group column name of asset data (for enable)</td>
</tr>
<tr>
<td>afterSchedule</td>
<td>Describes the behavior of events after schedule maintenance . For delete events its ‘1’ for unsuppress its ‘0’</td>
<td>1/0</td>
</tr>
<tr>
<td>assetconfig.cron.expression</td>
<td>Frequency of Regular asset Sync. From the asset upload configuration page details</td>
<td>Every day mid night (By default)</td>
</tr>
<tr>
<td>ldap.user.config.cron.expression</td>
<td>Frequency of Regular LDAP user data sync. From the LDAP  configuration page details</td>
<td>Every day mid night (By default)</td>
</tr>
<tr>
<td>suppressColumn</td>
<td>Column of Alert to update when the schedule active</td>
<td>SuppressEscl (By default)</td>
</tr>
<tr>
<td>suppressFlag</td>
<td>Value in the column that indicate the alert is suppressed</td>
<td>6 (By default)</td>
</tr>
<tr>
<td>unsuppressFlag</td>
<td>Value in the column that indicate the alert is un suppressed</td>
<td>0 (By default)</td>
</tr>
</tbody></table>
<h2 id='housekeeping-cron-jobs'>Housekeeping cron jobs</h2>
<blockquote>
<p>Below cron jobs used for remove archived log files of 10 days old</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>30 2 <span class="k">*</span> <span class="k">*</span> <span class="k">*</span> find /opt/tomcat/logs/ -type f -name <span class="s2">"catalina.20[0-9][0-9]-[0-9][0-9]-[0-9][0-9].log"</span> -mtime +10 -delete 

30 2 <span class="k">*</span> <span class="k">*</span> <span class="k">*</span> find /opt/tomcat/logs/ -type f -name <span class="s2">"localhost_access_log.20[0-9][0-9]-[0-9][0-9]-[0-9][0-9].txt"</span> -mtime +10 -delete 

30 2 <span class="k">*</span> <span class="k">*</span> <span class="k">*</span> find /opt/tomcat/logs/ -type f -name <span class="s2">"localhost.20[0-9][0-9]-[0-9][0-9]-[0-9][0-9].log"</span> -mtime +10 -delete 

30 2 <span class="k">*</span> <span class="k">*</span> <span class="k">*</span> find /opt/tomcat/logs/ -type f -name <span class="s2">"manager.20[0-9][0-9]-[0-9][0-9]-[0-9][0-9].log"</span> -mtime +10 -delete

</code></pre><h2 id='log-rotation-for-catalina-out'>Log rotation for Catalina.out</h2><h3 id='create-a-file-called-tomcat'>Create a file called tomcat</h3>
<p>/etc/logrotate.d/tomcat</p>
<h3 id='copy-the-following-contents-into-this-tomcat-file'>Copy the following contents into this tomcat file</h3>
<p>/opt/vebm/logs/catalina.out {</p>

<p>copytruncate</p>

<p>daily</p>

<p>rotate 7</p>

<p>compress</p>

<p>missingok</p>

<p>size 200M</p>

<p>}
Here&#39;s what each component in the file means: </p>

<p>daily - rotates the catalina.out daily
 rotate – keeps up to 7 log files
 compress – compresses the rotated files
 size – rotates if the size of catalina.out is bigger than 200MB</p>

<p>No Restart require. </p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="ruby">ruby</a>
                <a href="#" data-language-name="python">python</a>
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
</html>
